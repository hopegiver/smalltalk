<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="매일 10분, 영어 스몰톡 마스터">
    <meta name="theme-color" content="#667eea">
    <title>English SmallTalk Trainer</title>

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="icon.svg">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SmallTalk">
    <link rel="apple-touch-icon" href="icon.svg">

    <link rel="stylesheet" href="style.css?v=15">
</head>
<body>
    <div class="container">
        <!-- Start Screen -->
        <div id="startScreen" class="screen active">
            <div class="app-header">
                <h1>English SmallTalk</h1>
            </div>
            <div class="screen-content">
                <div class="header">
                    <p class="subtitle">매일 10분, 영어 스몰톡 마스터</p>
                </div>

                <div class="quick-stats">
                <div class="quick-stat-item">
                    <div class="quick-stat-icon">🔥</div>
                    <div class="quick-stat-value" id="quickStreak">0</div>
                    <div class="quick-stat-label">연속</div>
                </div>
                <div class="quick-stat-item">
                    <div class="quick-stat-icon">✅</div>
                    <div class="quick-stat-value" id="quickMastered">0</div>
                    <div class="quick-stat-label">완료</div>
                </div>
                <div class="quick-stat-item">
                    <div class="quick-stat-icon">📊</div>
                    <div class="quick-stat-value" id="quickAccuracy">0%</div>
                    <div class="quick-stat-label">정확도</div>
                </div>
            </div>

            <div id="micWarning" class="warning" style="display: none;">
                ⚠️ 마이크 권한이 필요합니다. Chrome 또는 Edge 브라우저를 사용하세요.
            </div>

            <div class="menu-grid">
                <div class="menu-item" onclick="startQuiz('smart')">
                    <div class="menu-icon">🎯</div>
                    <div class="menu-title">스마트 학습</div>
                    <div class="menu-desc">AI 추천</div>
                </div>
                <div class="menu-item" onclick="startQuiz('random')">
                    <div class="menu-icon">🎲</div>
                    <div class="menu-title">랜덤 테스트</div>
                    <div class="menu-desc">무작위</div>
                </div>
                <div class="menu-item" id="wrongOnlyMenu" onclick="startQuiz('wrong')">
                    <div class="menu-icon">❌</div>
                    <div class="menu-title">틀린 문제</div>
                    <div class="menu-desc" id="wrongCount">0개</div>
                </div>
                <div class="menu-item" onclick="showStatistics()">
                    <div class="menu-icon">📊</div>
                    <div class="menu-title">학습 통계</div>
                    <div class="menu-desc">분석</div>
                </div>
            </div>
            </div>
        </div>

        <!-- Statistics Screen -->
        <div id="statsScreen" class="screen">
            <div class="app-header">
                <h1>📊 학습 통계</h1>
            </div>
            <div class="screen-content">
                <div class="stats-detail">
                <div class="stat-card">
                    <div class="stat-card-icon">🔥</div>
                    <div class="stat-card-value" id="streakDays">0일</div>
                    <div class="stat-card-label">연속 학습</div>
                </div>

                <div class="stat-card">
                    <div class="stat-card-icon">📅</div>
                    <div class="stat-card-value" id="totalDays">0일</div>
                    <div class="stat-card-label">총 학습 일수</div>
                </div>

                <div class="stat-card">
                    <div class="stat-card-icon">✅</div>
                    <div class="stat-card-value" id="totalQuestions">0개</div>
                    <div class="stat-card-label">총 학습 문제</div>
                </div>
            </div>

            <div class="today-stats">
                <h2>오늘의 학습</h2>
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">문제 수</div>
                        <div class="stat-value" id="todayQuestions">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">정답</div>
                        <div class="stat-value" id="todayCorrect">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">정답률</div>
                        <div class="stat-value" id="todayAccuracy">0%</div>
                    </div>
                </div>
            </div>

            <div class="weekly-calendar" id="weeklyCalendar">
                <h2>최근 7일 학습 현황</h2>
                <div class="calendar-grid" id="calendarGrid"></div>
            </div>

            <button class="btn" onclick="closeStatistics()">닫기</button>
            </div>
        </div>

        <!-- Smart Quiz Screen -->
        <div id="smartQuizScreen" class="screen">
            <div class="app-header">
                <h1>🎯 스마트 학습</h1>
            </div>
            <div class="screen-content">
                <div class="progress-bar">
                    <div class="progress-fill" id="smartProgressBar"></div>
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">문제</div>
                        <div class="stat-value" id="smartCurrentQuestion">1/10</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">정답</div>
                        <div class="stat-value" id="smartCorrect">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">총 테스트</div>
                        <div class="stat-value" id="smartTotalSessions">0회</div>
                    </div>
                </div>

                <div class="question-box" id="smartQuestionText">한글 문장이 여기에 표시됩니다</div>

                <div class="random-instruction" style="padding: 20px; text-align: center; background: #f5f5f5; border-radius: 10px; margin: 20px 0;">확인 버튼을 눌러 정답을 확인하세요</div>

                <div class="btn-group">
                    <button class="btn" onclick="checkAnswer()">확인</button>
                    <button class="btn secondary" onclick="goHome()">처음으로</button>
                </div>
            </div>
        </div>

        <!-- Random Quiz Screen -->
        <div id="randomQuizScreen" class="screen">
            <div class="app-header">
                <h1>🎲 랜덤 테스트</h1>
            </div>
            <div class="screen-content">
                <div class="progress-bar">
                    <div class="progress-fill" id="randomProgressBar"></div>
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">문제</div>
                        <div class="stat-value" id="randomCurrentQuestion">1/10</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">정답</div>
                        <div class="stat-value" id="randomCorrect">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">남은 문제</div>
                        <div class="stat-value" id="randomRemaining">200개</div>
                    </div>
                </div>

                <div class="question-box" id="randomQuestionText">한글 문장이 여기에 표시됩니다</div>

                <div class="random-instruction" style="padding: 20px; text-align: center; background: #f5f5f5; border-radius: 10px; margin: 20px 0;">확인 버튼을 눌러 정답을 확인하세요</div>

                <div class="btn-group">
                    <button class="btn" onclick="checkAnswer()">확인</button>
                    <button class="btn secondary" onclick="goHome()">처음으로</button>
                </div>
            </div>
        </div>

        <!-- Wrong Quiz Screen -->
        <div id="wrongQuizScreen" class="screen">
            <div class="app-header">
                <h1>❌ 틀린 문제</h1>
            </div>
            <div class="screen-content">
                <div class="progress-bar">
                    <div class="progress-fill" id="wrongProgressBar"></div>
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">문제</div>
                        <div class="stat-value" id="wrongCurrentQuestion">1/10</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">정답</div>
                        <div class="stat-value" id="wrongCorrect">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">총 테스트</div>
                        <div class="stat-value" id="wrongTotalSessions">0회</div>
                    </div>
                </div>

                <div class="question-box" id="wrongQuestionText">한글 문장이 여기에 표시됩니다</div>

                <div class="random-instruction" style="padding: 20px; text-align: center; background: #f5f5f5; border-radius: 10px; margin: 20px 0;">확인 버튼을 눌러 정답을 확인하세요</div>

                <div class="btn-group">
                    <button class="btn" onclick="checkAnswer()">확인</button>
                    <button class="btn secondary" onclick="goHome()">처음으로</button>
                </div>
            </div>
        </div>

        <!-- Smart Answer Screen -->
        <div id="smartAnswerScreen" class="screen">
            <div class="app-header">
                <h1>💡 정답 확인</h1>
            </div>
            <div class="screen-content">
                <div class="progress-bar">
                    <div class="progress-fill" id="smartAnswerProgressBar"></div>
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">문제</div>
                        <div class="stat-value" id="smartAnswerCurrentQuestion">1/10</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">정답</div>
                        <div class="stat-value" id="smartAnswerCorrect">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">총 테스트</div>
                        <div class="stat-value" id="smartAnswerTotalSessions">0회</div>
                    </div>
                </div>

                <div class="correct-answer-box">
                    <div class="answer-label">정답</div>
                    <div id="smartCorrectAnswer" class="correct-answer-text">Correct answer here</div>
                </div>

                <div class="random-instruction" style="padding: 20px; text-align: center; background: #f5f5f5; border-radius: 10px; margin: 20px 0;">맞았는지 틀렸는지 선택하세요</div>

                <div class="btn-group">
                    <button class="btn" onclick="markAnswer(true)" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">맞음</button>
                    <button class="btn" onclick="markAnswer(false)" style="background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);">틀림</button>
                </div>
                <div class="btn-group" style="margin-top: 10px;">
                    <button class="btn secondary" onclick="goHome()">처음으로</button>
                </div>
            </div>
        </div>

        <!-- Random Answer Screen -->
        <div id="randomAnswerScreen" class="screen">
            <div class="app-header">
                <h1>🎲 랜덤 테스트</h1>
            </div>
            <div class="screen-content">
                <div class="progress-bar">
                    <div class="progress-fill" id="randomAnswerProgressBar"></div>
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">문제</div>
                        <div class="stat-value" id="randomAnswerCurrentQuestion">1/10</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">정답</div>
                        <div class="stat-value" id="randomAnswerCorrect">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">남은 문제</div>
                        <div class="stat-value" id="randomAnswerRemaining">200개</div>
                    </div>
                </div>

                <div class="correct-answer-box">
                    <div class="answer-label">정답</div>
                    <div id="randomCorrectAnswer" class="correct-answer-text">Correct answer here</div>
                </div>

                <div class="random-instruction" style="padding: 20px; text-align: center; background: #f5f5f5; border-radius: 10px; margin: 20px 0;">맞았는지 틀렸는지 선택하세요</div>

                <div class="btn-group">
                    <button class="btn" onclick="markRandomAnswer(true)" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">맞음</button>
                    <button class="btn" onclick="markRandomAnswer(false)" style="background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);">틀림</button>
                </div>
                <div class="btn-group" style="margin-top: 10px;">
                    <button class="btn secondary" onclick="goHome()">처음으로</button>
                </div>
            </div>
        </div>

        <!-- Wrong Answer Screen -->
        <div id="wrongAnswerScreen" class="screen">
            <div class="app-header">
                <h1>💡 정답 확인</h1>
            </div>
            <div class="screen-content">
                <div class="progress-bar">
                    <div class="progress-fill" id="wrongAnswerProgressBar"></div>
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-label">문제</div>
                        <div class="stat-value" id="wrongAnswerCurrentQuestion">1/10</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">정답</div>
                        <div class="stat-value" id="wrongAnswerCorrect">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">총 테스트</div>
                        <div class="stat-value" id="wrongAnswerTotalSessions">0회</div>
                    </div>
                </div>

                <div class="correct-answer-box">
                    <div class="answer-label">정답</div>
                    <div id="wrongCorrectAnswer" class="correct-answer-text">Correct answer here</div>
                </div>

                <div class="random-instruction" style="padding: 20px; text-align: center; background: #f5f5f5; border-radius: 10px; margin: 20px 0;">맞았는지 틀렸는지 선택하세요</div>

                <div class="btn-group">
                    <button class="btn" onclick="markAnswer(true)" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">맞음</button>
                    <button class="btn" onclick="markAnswer(false)" style="background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);">틀림</button>
                </div>
                <div class="btn-group" style="margin-top: 10px;">
                    <button class="btn secondary" onclick="goHome()">처음으로</button>
                </div>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="resultScreen" class="screen">
            <div class="app-header">
                <h1>🎉 테스트 완료</h1>
            </div>
            <div class="screen-content">
                <div class="stats">
                <div class="stat-item">
                    <div class="stat-label">정답</div>
                    <div class="stat-value" id="finalCorrect">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">오답</div>
                    <div class="stat-value" id="finalWrong">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">점수</div>
                    <div class="stat-value" id="finalScore">0%</div>
                </div>
            </div>

            <div class="result-list" id="resultList"></div>

            <div class="btn-group">
                <button class="btn" onclick="continueQuiz()">계속 진행하기</button>
                <button class="btn secondary" onclick="goHome()">처음으로</button>
            </div>
            </div>
        </div>
    </div>

    <script src="script.js?v=15"></script>
</body>
</html>
